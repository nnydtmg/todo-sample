# ADR 0004: RESTful APIの設計

## ステータス
採用

## コンテキスト
バックエンドとフロントエンド間の通信方法を決定する必要があった。主な選択肢は以下の通り:
1. RESTful API
2. GraphQL
3. gRPC

## 決定事項
RESTful APIを採用し、以下のエンドポイントを設計:
- GET /api/todos - すべてのTodoを取得
- GET /api/todos?completed=true - 完了済みTodoのフィルタリング
- GET /api/todos/{id} - 特定のTodoを取得
- POST /api/todos - 新しいTodoを作成
- PUT /api/todos/{id} - 特定のTodoを更新
- PATCH /api/todos/{id}/toggle - Todoの完了状態を切り替え
- DELETE /api/todos/{id} - 特定のTodoを削除

## 根拠
- **シンプルさ**: RESTはシンプルで広く採用されている通信方法であり、学習コストが低い。
- **キャッシュ**: HTTP標準のキャッシュ機構を活用できる。
- **成熟度**: 多くのツールやライブラリがREST APIをサポートしている。
- **互換性**: 様々なクライアント（ブラウザ、モバイルアプリ）との互換性が高い。
- **部分更新の効率化**: PATCHメソッドを使用して、Todoの完了状態のみを効率的に更新できるエンドポイントを提供。

## 影響
- クライアント側でのデータ整形や加工が必要になる場合がある。
- オーバーフェッチング（必要以上のデータ取得）が発生する可能性がある。
- 複数リソースの同時取得には複数リクエストが必要。

## 備考
将来的にクライアントの要件が複雑化し、細かいデータ要求やパフォーマンスの問題が生じた場合は、GraphQLへの移行を検討する。
